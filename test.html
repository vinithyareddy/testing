Html:

<div [ngClass]="{ 'full-view' : fullview }">

<div class="budget-card-box-lg">

    <div class="budget-box-chart-lg">

 

        <!-- Header -->

        <div class="d-flex justify-content-between align-items-center flex-wrap">

            <div class="widget-heading pointer mt-1 d-flex align-items-center">

                <span class="d-inline-flex">

                   Work Force Supply (FTE) by Manager Flag & Grade

                    <ng-template [ngTemplateOutlet]="infotemp"></ng-template>

                </span>

            </div>

 

            <div class="d-flex justify-content-end align-items-center header-icons">

                <div class="togglebtn d-flex">

                    <!-- <div class="lft-toggle" [class.lft-toggle-active]="widgetType === 'th'" (click)="loadWidget('th')">

                        <i class="fa fa-table fnticon" aria-hidden="true"></i>

                    </div>

                    <div class="rgt-toggle" [class.rgt-toggle-active]="widgetType === 'ch'" (click)="loadWidget('ch')">

                        <i class="fas fa-chart-bar fnticon" aria-hidden="true"></i>

                    </div> -->

 

                    <div class="lft-toggle" [class.lft-toggle-active]="widgetType == 'th'" (click)="loadWidget('th')"><i

                            class="fa fa-table fnticon" aria-hidden="true"></i></div>

                    <div class="rgt-toggle" [class.rgt-toggle-active]="widgetType == 'ch'" (click)="loadWidget('ch')"><i

                            class="fas fa-chart-bar" aria-hidden="true"></i></div>

                    <div class="rgt-toggle" [class.rgt-toggle-active]="widgetType == 'pi'" (click)="loadWidget('pi')"><i

                            class="fa fa-chart-pie fnticon" aria-hidden="true"></i></div>

                </div>

                <div class="d-flex gap-3">

                    <span (click)="fullPageView()" class="view">

                        @if (!fullview) {

                        <i class="fas fa-expand" title="Zoom" alt="Zoom"></i>

                        }

                        @if (fullview) {

                        <i class="fas fa-expand" title="Zoom" alt="Zoom"></i>

                        }

                    </span>                     <div class="ellipsis ml-2"><i class="fas fa-ellipsis-v"></i></div>

                </div>

            </div>

        </div>

          <!-- Chart -->

<div>

    <ng-container *ngIf="!responseFlag">

                <div class="loader-img">

                    <div class="col-md-12">

                        <div #cartboxchartsection></div>

                    </div>

                    <lift-section-loader></lift-section-loader>

                </div>

            </ng-container>

            <ng-container *ngIf="responseFlag == true">

                <ng-container *ngIf="widgetType == 'ch'">

                    <div class="inner-card-box">

                        <div class="row">

 

                            <div class="col-md-12 col-lg-12" #cartboxchartsection>

                                <div>

                                    <ng-container *ngFor="let columnChart of swfpColumnChart">

 

                                        <highcharts-chart [Highcharts]="columnChart.Highcharts"

                                            [options]="columnChart.chartOptions"

                                            [constructorType]="columnChart.chartConstructor">

                                        </highcharts-chart>

                                    </ng-container>

                                </div>

                            </div>

 

                        </div>

                        <div class="pl-4 legend-bottom" *ngIf="legends.length > 0">

                            <ul class="listLegend">

                                <ng-container *ngFor="let data of legends">

                                    <li><span class="dot" [ngStyle]="{'background-color': data.color}"></span>

                                        &nbsp;&nbsp;{{data.name}}

                                    </li>

                                </ng-container>

                            </ul>

                        </div>

                    </div>

 

                </ng-container>

                <ng-container *ngIf="widgetType == 'pi'">

                    <div class="inner-card-box">

                        <div class="row">

 

                            <div class="col-md-12 col-lg-12" #cartboxchartsection>

                                <div class="chart-grid">

                                    <ng-container *ngFor="let trendchart of swfpPieChartByGH">

                                        <div class="donut-cell">

                                            <highcharts-chart class="donut-chart" [Highcharts]="trendchart.Highcharts"

                                                [options]="trendchart.chartOptions"

                                                [constructorType]="trendchart.chartConstructor">

                                            </highcharts-chart>

                                        </div>

                                    </ng-container>

 

                                    <ng-container *ngFor="let trendchart of swfpPieChartByGI">

                                        <div class="donut-cell">

                                            <highcharts-chart class="donut-chart" [Highcharts]="trendchart.Highcharts"

                                                [options]="trendchart.chartOptions"

                                                [constructorType]="trendchart.chartConstructor">

                                            </highcharts-chart>

                                        </div>

                                    </ng-container>

                                </div>

                            </div>

                        </div>

 

                        <div class="pl-4 legend-bottom" *ngIf="legends.length > 0">

                            <ul class="listLegend">

                                <ng-container *ngFor="let data of legends">

                                    <li><span class="dot" [ngStyle]="{'background-color': data.color}"></span>

                                        &nbsp;&nbsp;{{data.name}}

                                    </li>

                                </ng-container>

                            </ul>

                        </div>

                    </div>



 

                </ng-container>

                <ng-container *ngIf="widgetType == 'th'">

 

<div class="grade-table" *ngIf="groups().length">

                    <div class="row table-row">

 

                        <div class="table-container">

 

                            <table>

                                <thead>

                                    <tr>

                                        <th class="">Grade</th>

                                        <th class="">Category</th>

                                        <th class="right" style="text-align: right !important;">Units</th>

                                    </tr>

                                </thead>

                                <tbody>

      <ng-container *ngFor="let g of groups(); trackBy: trackGroup">

        <!-- Group header -->

        <tr class="group" (click)="toggle(g)">

          <td>

            <button class="toggle"

                    [attr.aria-expanded]="g.expanded"

                    (click)="$event.stopPropagation(); toggle(g)">

              {{ g.expanded ? '▾' : '▸' }}

            </button>

            <strong>{{ g.name }}</strong>

          </td>

          <td></td>

          <td class="right">

            <strong>(100%)</strong>           

          </td>

        </tr>

 

        <!-- Children -->

        <tr class="child" *ngFor="let it of g.items; trackBy: trackItem" [class.hidden]="!g.expanded">

          <td></td>

          <td class="indent">{{ it.category }}</td>

          <td class="right">

            {{ it.unit | number:'1.0-0' }}

            ({{ pct(it.unit, groupTotal(g)) | number:'1.0-1' }}%)

          </td>

        </tr>

      </ng-container>

    </tbody>

                                

                            </table>

                        </div>

                    </div>

                    </div>

                </ng-container>

                <div class="viewmore pointer mt-3 pt-3">

                    <span>View More&nbsp;&nbsp;</span>

                    <i class="fa fa-angle-right"></i>

                </div>

            </ng-container>

</div>

        </div>

        </div>

        <ng-template #infotemp>

    <lift-popover class="lift-popover-icon" popoverTitle="" popoverText="">

        <span><i class="far fa-info-circle"></i></span>

    </lift-popover>

</ng-template>

</div>



scss:
.pie-chart-container {

    display: flex;

    justify-content: space-around;

    align-items: center;

}

 

.chart-grid {

    display: flex;

    flex-wrap: inherit;

    gap: 16px;

    align-items: flex-start;

}

 

/* Desktop default: fixed 380x320 */

.donut-cell {

    width: 380px;

    height: 320px;

}

 

/* Ensure Highcharts fills the cell */

.donut-chart {

    display: block;

    width: 100%;

    height: 100%;

}

 

/* Tablet: fixed 320x270 */

@media (max-width: 1024px) {

    .donut-cell {

        width: 320px;

        height: 270px;

    }

}

 

/* Large phones / small tablets: fixed 280x240 */

@media (max-width: 768px) {

    .donut-cell {

        width: 280px;

        height: 240px;

    }

}

 

/* Phones: stack vertically, fixed 240x200 */

@media (max-width: 520px) {

    .chart-grid {

        flex-direction: column;

        align-items: center;

    }

 

    .donut-cell {

        width: 240px;

        height: 200px;

    }

}

 

/* Optional: make sure the Highcharts internal container stretches */

:host ::ng-deep .highcharts-container,

:host ::ng-deep .highcharts-root {

    width: 100% !important;

    height: 100% !important;

}

 

.grade-table table {

    width: 100%;

    border-collapse: separate;

    border-spacing: 0;

    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;

    background: #fff;

    border: 1px solid #e6e8eb;

    border-radius: 6px;

    overflow: hidden;

}

 

thead th {

    text-align: left !important;

    font-weight: 600;

    padding: 10px 12px;

    color: #3b3f44;

    background: #f7f9fb;

    border-bottom: 1px solid #e6e8eb;

}

 

tbody td {

    padding: 12px;

    border-bottom: 1px solid #f3f4f6;

    color: #2e3135;

}

 

::ng-deep .right {

    text-align: right !important;

    white-space: nowrap;

    font-variant-numeric: tabular-nums;

}

 

.indent {

    padding-left: 28px;

    color: #4a4f55;

}

 

tr.group {

    cursor: pointer;

}

 

tr.child.hidden {

    display: none;

}

 

.toggle {

    border: 0;

    background: transparent;

    padding: 0 6px 0 0;

    font-size: 14px;

    line-height: 1;

    cursor: pointer;

    color: #586069;

}

 

.budget-card-box .budget-box-chart {

    height: inherit !important;

}

 

.fa-chart-bar {

    display: inline-block;

    transform: rotate(270deg) scaleY(-1);

    margin-left: 10px;

    margin-top: 8px;

    font-size: 13px !important;

}

 

.fa-chart-pie {

    display: inline-block;

    transform: rotate(180deg) scaleY(-1);

    font-weight: 100;

}

 

.widget-heading {

    margin-right: 16px;

 

    i.fa-info-circle {

        font-size: 12px;

        color: #0071bc;

        margin-left: 4px;

        cursor: pointer;

    }

}

 

.header-icons {

    margin-bottom: 15px;

    display: flex;

    align-items: center;

    // gap: 12px;

 

    .togglebtn {

        display: flex;

 

        // .lft-toggle,

        // .rgt-toggle {

        //     width: 28px;

        //     height: 28px;

        //     // border: 1px solid #d6d6d6;

        //     text-align: center;

        //     line-height: 28px;

        //     cursor: pointer;

 

        //     i {

        //         font-size: 14px;

        //     }

        // }

    }

 

    .view,

    .ellipsis {

        font-size: 18px;

        color: #0071bc;

        cursor: pointer;

    }

 

}

 

.inner-card-box-lg {

    padding: 6px 0 4px;

}

 

.viewmore {

    font-size: 14px;

    font-weight: 600;

    color: #0071bc;

    text-align: right;

}

 

.full-view {

    position: fixed;

    overflow-y: auto;

    overflow-x: hidden;

    top: 0;

    left: 0;

    bottom: 0;

    right: 0;

    z-index: 99999;

    background-color: #fff;

    padding: 20px;

 

    .budget-card-box-lg {

        height: 820px !important;

 

        .budget-box-chart-lg {

            height: 800px !important;

        }

 

        .TableView {

            height: 650px !important;

            max-height: 680px;

            width: 100%;

        }

    }

}

 

.lift-popover-icon {

    margin-top: -5px;

}

 

.fa-table {

    font-weight: 100;

}



ts:
import { AfterViewInit, Component, computed, ElementRef, HostListener, OnDestroy, OnInit, Renderer2, signal, ViewChild } from '@angular/core';

import { animate, state, style, transition, trigger } from '@angular/animations';

import { SwfpByManagerFlagGradeService } from '../../services/swfp-by-manager-flag-grade.service';

 

import { CommonModule } from '@angular/common';

import { HttpClientModule } from '@angular/common/http';

import { FormsModule } from '@angular/forms';

import { LiftButtonComponent, LiftButtonGroupComponent, LiftButtonSwitchComponent } from '@lift/formcontrols';

import { LiftSectionLoaderComponent } from '@lift/loaders';

import { LiftPopoverComponent } from '@lift/ui';

import { HighchartsChartModule } from 'highcharts-angular';

 

type Item = { category: string; unit: number };

type Group = { name: string; items: Item[]; expanded?: boolean };

const DEFAULT_DURATION = 300;

@Component({

  selector: 'app-swfp-by-manager-flag-grade',

  templateUrl: './swfp-by-manager-flag-grade.component.html',

  standalone:true,

        imports:[

    CommonModule,

    FormsModule,

    HttpClientModule,

    LiftSectionLoaderComponent,

    HighchartsChartModule,

    LiftPopoverComponent

],

  styleUrl: './swfp-by-manager-flag-grade.component.scss',

 

  animations: [

    trigger('collapse', [

      state('false', style({ height: '550px', visibility: 'visible' })),

      state('true', style({ height: '0', visibility: 'hidden' })),

      transition('false => true', animate(DEFAULT_DURATION + 'ms ease-in')),

      transition('true => false', animate(DEFAULT_DURATION + 'ms ease-out'))

    ])

  ]

})

 

export class SwfpByManagerFlagGradeComponent implements OnInit, AfterViewInit, OnDestroy {

  fullview = false;

  widgetType: string = 'ch';

  responseFlag: boolean = false;

  swfpColumnChart: any = [];

  swfpPieChartByGH: any = [];

  swfpPieChartByGI: any = [];

  tableData = [

    { grp: 'GH', items: [{ cateory: 'Managerial', Unit: '5' }, { cateory: 'Technical', Unit: '110' }] },

    { grp: 'GI', items: [{ cateory: 'Managerial', Unit: '10' }, { cateory: 'Technical', Unit: '200' }] }

  ];

  legends: any = [{ name: 'Managerial', color: '#71cecd' }, { name: 'Technical', color: '#6b70af' }];

  //private chartRefs = new Set<Highcharts.Chart>();

  //private destroyed$ = new Subject<void>();

  @ViewChild('cartboxchartsection') cartboxchartsection: ElementRef;

  groups = signal<Group[]>([]);

  // Optional grand totals

  grandTotal = computed(() =>

    this.groups().reduce((sum, g) => sum + this.groupTotal(g), 0)

  );

  constructor(private service: SwfpByManagerFlagGradeService, private render: Renderer2) {

    this.mapTable();

  }

 

  groupTotal = (g: Group) => g.items.reduce((s, x) => s + (Number.isFinite(x.unit) ? x.unit : 0), 0);



 

  mapTable() {

    const normalized: Group[] = this.tableData.map((g: any) => {

      const name = g.grp ?? g.name ?? 'Unknown';

      const items: Item[] = (Array.isArray(g.items) ? g.items : [g.items])

        .filter(Boolean)

        .map((it: any) => ({

          // cope with the typo "cateory" and casing

          category: it.category ?? it.cateory ?? it.Category ?? '',

          unit: Number(it.unit ?? it.Unit ?? 0)

        }));

      return { name, items, expanded: true };

    });

    this.groups.set(normalized);

  }

 

  toggle(g: Group) {

    g.expanded = !g.expanded;

    // trigger change by re-setting the array reference (signals handle it, but ensure immutability if needed)

    this.groups.set([...this.groups()]);

  }

 

  // Helper for percentage inside a group

  pct(part: number, total: number) {

    if (!total) return 0;

    return (part / total) * 100;

  }

 

  trackGroup = (_: number, g: Group) => g.name;

  trackItem = (_: number, it: Item) => it.category + ':' + it.unit;

 

  ngAfterViewInit(): void {

 

    setTimeout(() => {

      this.onInitLoad();

    }, 200);

 

  }

  ngOnInit(): void {

 

  }

  loadWidget(chartType: any) {

    this.widgetType = chartType;

    this.onInitLoad();

  }

 

  onLoadPieChartByGH() {

 

    const chartdata = [{

      name: 'BY GH Grade',

      colorByPoint: true,

      innerSize: '85%',

      data: [{ name: 'Managerial', color: '#71cecd', y: 5 }, { name: 'Technical', color: '#6b70af', y: 110 }]

    }];

    const chartWidth = 400;

    const chartHeight = 330;

    let ChartOptions = {};

    const chartTitle = 'BY GH Grade';

    const centerVal = 115;

    const centerTxt = 'BY GH Grade';

    const datalabelsEnabled = true;

    const legendVisible = false;

    ChartOptions = {

      chartTitle: chartTitle,

      centerVal: centerVal,

      centerTxt: centerTxt,

      chartWidth: chartWidth,

      chartHight: chartHeight,

      legendVisible: legendVisible,

      dataseries: chartdata,

      xAxisVisible: true,

      yAxisVisible: false,

      dataLabelEnable: datalabelsEnabled

    };

    this.swfpPieChartByGH = this.service.getPieChart(ChartOptions);

  }

 

  onLoadPieChartByGI() {

    const chartdata = [{

      name: 'BY GI Grade',

      colorByPoint: true,

      innerSize: '85%',

      data: [{ name: 'Managerial', color: '#71cecd', y: 10 },

      { name: 'Technical', color: '#6b70af', y: 200 }]

    }];

 

    const chartWidth = 400;

    const chartHeight = 330;

    let ChartOptions = {};

    const chartTitle = 'BY GI Grade';

    const centerVal = 210;

    const centerTxt = 'BY GI Grade';

    const datalabelsEnabled = true;

    const legendVisible = false;

    ChartOptions = {

      chartTitle: chartTitle,

      centerVal: centerVal,

      centerTxt: centerTxt,

      chartWidth: chartWidth,

      chartHight: chartHeight,

      legendVisible: legendVisible,

      dataseries: chartdata,

      xAxisVisible: true,

      yAxisVisible: false,

      dataLabelEnable: datalabelsEnabled

    };

    this.swfpPieChartByGI = this.service.getPieChart(ChartOptions);

  }

  onLoadColumnChart() {

    let ChartOptions = {};

    let xAxisCategory = ['GA', 'GB', 'GC', 'GD', 'GE', 'GF', 'GG', 'GH']

    const ChartData = [

      {

        name: 'Managerial',

        data: [10, 20, 40, 50, 60, 70, 30, 80],

        color: '#71cecd',

      },

      {

        name: 'Technical',

        data: [20, 10, 50, 40, 70, 60, 50, 90],

        color: '#6b70af',

      }];

    ChartOptions = {

 

      chartWidth: this.cartboxchartsection.nativeElement.offsetWidth - 40,

      chartHeight: 330,

      xAxisCategory: xAxisCategory,

      legendVisible: false,

      dataseries: ChartData,

      xAxisVisible: true,

      yAxisVisible: true,

      xAxisTitle: 'Grade',

      yAxisTitle: 'Percentage',

      dataLabelEnable: true,

      //max: Math.max(max, max1) + (Math.max(max, max1) * (Math.max(max, max1) > 10 ? 0.8 : 3))/100

    };

    this.swfpColumnChart = this.service.getStackedColumnChart(ChartOptions);

    this.responseFlag = true;

  }

  onInitLoad() {

    if (this.widgetType === 'ch') { this.onLoadColumnChart() }

    if (this.widgetType === 'pi') {

      this.onLoadPieChartByGH();

      this.onLoadPieChartByGI();

    }

 

  }

  ngOnDestroy(): void {

 

  }



 

  @HostListener('window:resize', ['$event'])

  onResize() {

    this.onInitLoad();

  }

  fullPageView() {

    this.fullview = !this.fullview;

    if (this.fullview === true) {

      this.render.addClass(document.body, 'no-scroll');

    } else {

      this.render.removeClass(document.body, 'no-scroll');

    }

  }

}

 



this is one widget code as shown in first pic, I want to add this button in pie chart view and other chart view not needed in table view, 

button:
  <button *ngIf="currentView === 'chart'" class="nav-arrow left-arrow">

                <i class="fa fa-chevron-left"></i>

            </button>





I have implemented this button in other code, I will send you how I did, like this I want in this widget also 

  <div class="content-area">

 

            <button *ngIf="currentView === 'chart'" class="nav-arrow left-arrow">

                <i class="fa fa-chevron-left"></i>

            </button>

 

            <!-- Chart -->

            <highcharts-chart *ngIf="currentView === 'chart'" [Highcharts]="Highcharts" [options]="chartOptions"

                style="width: 95%; height: 290px; display: block;">

            </highcharts-chart>

 

            <!-- Table -->

            <table *ngIf="currentView === 'table'" class="data-table">

                <thead>

                    <tr>

                        <th>Position</th>

                        <th>Amount</th>

                    </tr>

                </thead>

                <tbody>

                    <tr

                        *ngFor="let row of (data.length > pageSize ? data.slice(currentIndex, currentIndex + pageSize) : data)">

                        <td>{{ row.position }}</td>

                        <td>{{ row.amount }}</td>

                    </tr>

                </tbody>

            </table>

 

            <button *ngIf="currentView === 'chart'" class="nav-arrow right-arrow">

                <i class="fa fa-chevron-right"></i>

            </button>

 

        </div>

 