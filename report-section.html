<div class="role-container">

  <!-- Header -->
  <div class="header">
    <h2>Tell us about your role</h2>
    <p class="subtitle">Choose your segment to get personalized prompts and responses</p>
    <p class="note">
      This only affects how prompts and answers are tailored. You can change this anytime.
    </p>
  </div>

  <!-- Name Input -->
  <div class="form-group">
    <label>Your name <span class="optional">(optional)</span></label>

    <input
      type="text"
      [(ngModel)]="name"
      placeholder="e.g., Oumaima (or leave blank)"
    />
  </div>

  <!-- Strategic -->
  <div class="segment-group">

    <div class="group-header">
      <h3>Strategic Decision-Makers</h3>
      <p>High-level oversight and strategic planning</p>
    </div>

    <div class="grid two">

      <button
        *ngFor="let segment of groupedSegments.strategic"
        (click)="handleSegmentSelect(segment)"
        [ngClass]="{ 'selected': selectedSegment?.id === segment.id }"
        class="segment-card">

        <div class="card-content">

          <div class="icon blue">
            {{ SEGMENT_ICONS[segment.id] || 'üë§' }}
          </div>

          <div class="card-text">
            <h4>{{ segment.displayName }}</h4>
            <p>{{ getSegmentDescription(segment) }}</p>

            <span class="persona-list" *ngIf="segment.personas?.length">
              Includes: {{ getPersonaNames(segment.personas) }}
            </span>
          </div>

        </div>
      </button>

    </div>
  </div>

  <!-- Operational -->
  <div class="segment-group">

    <div class="group-header">
      <h3>Operational & Technical Users</h3>
      <p>Day-to-day operations, analysis, and technical work</p>
    </div>

    <div class="grid three">

      <button
        *ngFor="let segment of groupedSegments.operational"
        (click)="handleSegmentSelect(segment)"
        [ngClass]="{ 'selected': selectedSegment?.id === segment.id }"
        class="segment-card small">

        <div class="card-content">

          <div class="icon green small">
            {{ SEGMENT_ICONS[segment.id] || 'üë§' }}
          </div>

          <div class="card-text">
            <h4>{{ segment.displayName }}</h4>
            <p>{{ getSegmentDescription(segment) }}</p>

            <span class="persona-list" *ngIf="segment.personas?.length">
              {{ getPersonaNames(segment.personas) }}
            </span>
          </div>

        </div>
      </button>

    </div>
  </div>

  <!-- Enablement -->
  <div class="segment-group">

    <div class="grid two">

      <button
        *ngFor="let segment of groupedSegments.enablement"
        (click)="handleSegmentSelect(segment)"
        [ngClass]="{ 'selected': selectedSegment?.id === segment.id }"
        class="segment-card">

        <div class="card-content">

          <div class="icon purple">
            {{ SEGMENT_ICONS[segment.id] || 'üë§' }}
          </div>

          <div class="card-text">
            <h4>{{ segment.displayName }}</h4>
            <p>{{ getSegmentDescription(segment) }}</p>

            <span class="persona-list" *ngIf="segment.personas?.length">
              Includes: {{ getPersonaNames(segment.personas) }}
            </span>
          </div>

        </div>
      </button>

    </div>
  </div>

  <!-- Persona Selection -->
  <div *ngIf="selectedSegment?.personas?.length > 1" class="persona-section">

    <label>Choose a persona (optional)</label>

    <div class="grid two">

      <button
        *ngFor="let persona of selectedSegment.personas"
        (click)="handlePersonaSelect(persona)"
        [ngClass]="{ 'selected': selectedPersona?.id === persona.id }"
        class="persona-card">

        <span class="emoji">{{ persona.emoji || 'üë§' }}</span>

        <div>
          <h5>{{ persona.name }}</h5>
          <p>{{ persona.tagline }}</p>
        </div>

      </button>

    </div>
  </div>

  <!-- Footer -->
  <div class="footer">

    <button class="back-btn" (click)="back.emit()">
      ‚Üê Back
    </button>

    <button
      class="continue-btn"
      [disabled]="!selectedSegment"
      (click)="handleContinue()">

      Continue ‚Üí
    </button>

  </div>

</div>
